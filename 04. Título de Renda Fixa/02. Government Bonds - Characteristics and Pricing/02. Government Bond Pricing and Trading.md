### Introdu√ß√£o
Expandindo o conceito apresentado no cap√≠tulo anterior sobre t√≠tulos p√∫blicos no Brasil [^4], este cap√≠tulo detalha a metodologia de precifica√ß√£o desses ativos, al√©m de introduzir conceitos como Duration e Convexidade, essenciais para a gest√£o de risco e otimiza√ß√£o de carteiras de renda fixa. A correta avalia√ß√£o dos t√≠tulos p√∫blicos, considerando suas caracter√≠sticas intr√≠nsecas e o ambiente macroecon√¥mico, √© fundamental para a tomada de decis√µes de investimento [^6].

### Conceitos Fundamentais
Como vimos anteriormente, a precifica√ß√£o de t√≠tulos p√∫blicos √© influenciada pelas caracter√≠sticas do t√≠tulo (indexado ou n√£o), pelo fluxo de renda previsto (pagamento de cupons) e pelo prazo (dias √∫teis, corridos etc.) [^6]. Cada t√≠tulo possui um m√©todo de c√°lculo espec√≠fico, dependendo da combina√ß√£o desses elementos [^6]. A seguir, exploramos em detalhes as metodologias de precifica√ß√£o para os principais t√≠tulos p√∫blicos federais, complementando as f√≥rmulas com a aplica√ß√£o de conceitos avan√ßados como Duration e Convexidade.

#### LTN (Letras do Tesouro Nacional)
A **Letra do Tesouro Nacional (LTN)** √© um t√≠tulo prefixado, negociado com des√°gio [^6]. O pre√ßo de negocia√ß√£o ($P_0$) √© calculado descontando o valor nominal ($P_n$) √† taxa de juros do mercado ($r_{aa}$), ajustado pelo prazo em dias √∫teis ($n$):

$$P_0 = \frac{1000}{(1 + r_{aa})^{\frac{n}{252}}}$$

Essa f√≥rmula expressa o valor presente do t√≠tulo.

> üí° **Exemplo Num√©rico:**
>
> Suponha que uma LTN com valor nominal de R\$1000 ven√ßa em 126 dias √∫teis e a taxa de juros de mercado para esse prazo seja de 12\% ao ano (0.12). Podemos calcular o pre√ßo te√≥rico da LTN da seguinte forma:
>
> $P_0 = \frac{1000}{(1 + 0.12)^{\frac{126}{252}}}$
>
> $P_0 = \frac{1000}{(1.12)^{0.5}}$
>
> $P_0 = \frac{1000}{1.0583}$
>
> $P_0 \approx 944.98$
>
> Portanto, o pre√ßo te√≥rico da LTN seria de aproximadamente R\$944,98. Isso significa que um investidor estaria disposto a pagar R\$944,98 hoje para receber R\$1000 no vencimento, dado que a taxa de juros de mercado √© de 12\% ao ano.
>
> ```python
> import numpy as np
>
> # Par√¢metros
> valor_nominal = 1000
> taxa_juros_anual = 0.12
> dias_uteis = 126
>
> # C√°lculo do pre√ßo te√≥rico
> preco_teorico = valor_nominal / (1 + taxa_juros_anual)**(dias_uteis / 252)
>
> print(f"O pre√ßo te√≥rico da LTN √©: R\${preco_teorico:.2f}")
> ```

**Observa√ß√£o:** A taxa $r_{aa}$ utilizada na f√≥rmula acima √© a taxa de juros anualizada *spot* para o prazo do t√≠tulo. √â importante ressaltar que essa taxa pode ser obtida a partir da curva de juros prefixada.

##### Convexidade das LTNs
A convexidade das LTNs, como t√≠tulos de cupom zero, √© geralmente baixa em compara√ß√£o com t√≠tulos que pagam cupons. No entanto, ela ainda desempenha um papel importante na gest√£o de risco, especialmente em cen√°rios de grandes varia√ß√µes nas taxas de juros.

Lembrando que a convexidade $C$ pode ser aproximada pela seguinte f√≥rmula:

$$C \approx \frac{1}{P} \frac{d^2P}{dy^2}$$

Em termos pr√°ticos, a convexidade positiva das LTNs significa que, em um ambiente de queda nas taxas de juros, o ganho no pre√ßo do t√≠tulo ser√° ligeiramente maior do que a perda em um ambiente de alta de taxas de juros de igual magnitude.

**Proposi√ß√£o 1:** A convexidade da LTN √© sempre positiva.

*Proof:* A convexidade √© dada pela segunda derivada do pre√ßo em rela√ß√£o ao *yield*. Derivando a f√≥rmula do pre√ßo da LTN duas vezes em rela√ß√£o a $r_{aa}$ e dividindo pelo pre√ßo, obtemos um valor positivo.

Para demonstrar formalmente a convexidade positiva da LTN, seguimos os seguintes passos:

I. Definimos o pre√ßo da LTN como uma fun√ß√£o do *yield* ($y = r_{aa}$):
$$P(y) = \frac{1000}{(1 + y)^{\frac{n}{252}}}$$

II. Calculamos a primeira derivada de $P(y)$ em rela√ß√£o a $y$:
$$\frac{dP}{dy} = 1000 \cdot \left(-\frac{n}{252}\right) (1 + y)^{-\frac{n}{252} - 1} = -\frac{1000n}{252} (1 + y)^{-\frac{n+252}{252}}$$

III. Calculamos a segunda derivada de $P(y)$ em rela√ß√£o a $y$:
$$\frac{d^2P}{dy^2} = -\frac{1000n}{252} \cdot \left(-\frac{n+252}{252}\right) (1 + y)^{-\frac{n+252}{252} - 1} = \frac{1000n(n+252)}{252^2} (1 + y)^{-\frac{n+504}{252}}$$

IV. Calculamos a convexidade $C$ usando a f√≥rmula aproximada:
$$C \approx \frac{1}{P} \frac{d^2P}{dy^2} = \frac{1}{P} \cdot \frac{1000n(n+252)}{252^2} (1 + y)^{-\frac{n+504}{252}}$$

V. Substitu√≠mos $P$ pela sua express√£o original:
$$C \approx \frac{(1 + y)^{\frac{n}{252}}}{1000} \cdot \frac{1000n(n+252)}{252^2} (1 + y)^{-\frac{n+504}{252}} = \frac{n(n+252)}{252^2} (1 + y)^{-\frac{504}{252}} = \frac{n(n+252)}{252^2} (1 + y)^{-2}$$

VI. Analisamos o sinal da express√£o da convexidade. Como $n$ (prazo em dias √∫teis) √© sempre positivo e $y$ (taxa de juros) √© tipicamente positivo, ent√£o:

*   $n(n+252) > 0$
*   $252^2 > 0$
*   $(1 + y)^{-2} > 0$

Portanto, $C > 0$.

VII. Conclus√£o: A convexidade da LTN √© sempre positiva, dado que todos os termos na express√£o final s√£o positivos. ‚ñ†

> üí° **Exemplo Num√©rico:**
>
> Vamos calcular a convexidade aproximada da LTN do exemplo anterior (126 dias √∫teis, taxa de juros de 12\% ao ano).
>
> Usando a f√≥rmula simplificada: $C \approx \frac{n(n+252)}{252^2} (1 + y)^{-2}$
>
> $C \approx \frac{126(126+252)}{252^2} (1 + 0.12)^{-2}$
>
> $C \approx \frac{126 \times 378}{63504} (1.12)^{-2}$
>
> $C \approx \frac{47628}{63504} \times 0.7972$
>
> $C \approx 0.7494 \times 0.7972$
>
> $C \approx 0.5974$
>
> A convexidade aproximada √© 0.5974. Isso significa que para grandes varia√ß√µes nas taxas de juros, a LTN ter√° um comportamento assim√©trico nos ganhos e perdas. Por exemplo, uma queda de 1\% na taxa de juros resultar√° em um ganho ligeiramente maior do que a perda resultante de um aumento de 1\% na taxa de juros.
>
> ```python
> import numpy as np
>
> # Par√¢metros
> dias_uteis = 126
> taxa_juros_anual = 0.12
>
> # C√°lculo da convexidade aproximada
> convexidade = (dias_uteis * (dias_uteis + 252) / (252**2)) * (1 + taxa_juros_anual)**(-2)
>
> print(f"A convexidade aproximada da LTN √©: {convexidade:.4f}")
> ```

#### LFT (Letras Financeiras do Tesouro)
As **Letras Financeiras do Tesouro (LFT)** s√£o t√≠tulos p√≥s-fixados atrelados √† taxa Selic [^7]. O pre√ßo de negocia√ß√£o ($P_0$) √© determinado pela cota√ß√£o (COT) sobre o valor nominal atualizado (VNA):

$$P_0 = VNA \times \frac{COT}{100}$$

A cota√ß√£o (COT) reflete a taxa de √°gio ou des√°gio em rela√ß√£o ao VNA:

$$COT = \frac{100}{(1 + \frac{r_{aa}}{100})^{\frac{n}{252}}}$$

Onde $r_{aa}$ representa a taxa de √°gio ou des√°gio anualizada.

> üí° **Exemplo Num√©rico:**
>
> Suponha que o VNA de uma LFT seja R\$1000, o prazo at√© o vencimento seja de 63 dias √∫teis e a taxa de √°gio seja de 0.5\% ao ano (0.005).
>
> Primeiro, calculamos a cota√ß√£o (COT):
>
> $COT = \frac{100}{(1 + \frac{0.5}{100})^{\frac{63}{252}}} = \frac{100}{(1 + 0.005)^{\frac{1}{4}}} = \frac{100}{(1.005)^{0.25}} \approx \frac{100}{1.00124} \approx 99.876$
>
> Agora, calculamos o pre√ßo de negocia√ß√£o ($P_0$):
>
> $P_0 = 1000 \times \frac{99.876}{100} = 998.76$
>
> Portanto, o pre√ßo de negocia√ß√£o da LFT seria de aproximadamente R\$998.76.
>
> ```python
> import numpy as np
>
> # Par√¢metros
> vna = 1000
> taxa_agio_anual = 0.005
> dias_uteis = 63
>
> # C√°lculo da cota√ß√£o
> cotacao = 100 / (1 + (taxa_agio_anual / 100))**(dias_uteis / 252)
>
> # C√°lculo do pre√ßo de negocia√ß√£o
> preco_negociacao = vna * (cotacao / 100)
>
> print(f"A cota√ß√£o da LFT √©: {cotacao:.3f}")
> print(f"O pre√ßo de negocia√ß√£o da LFT √©: R\${preco_negociacao:.2f}")
> ```

##### Duration das LFTs

Dado que as LFTs s√£o t√≠tulos p√≥s-fixados atrelados √† taxa Selic, sua duration √© geralmente muito baixa, pr√≥xima de zero. Isso ocorre porque o rendimento do t√≠tulo se ajusta continuamente √†s mudan√ßas nas taxas de juros do mercado. Portanto, o pre√ßo da LFT √© relativamente insens√≠vel √†s varia√ß√µes nas taxas de juros.

**Observa√ß√£o:** Em rigor, a duration da LFT n√£o √© exatamente zero, mas sim um valor muito pequeno, refletindo o prazo de ajuste da taxa Selic. Esse prazo √© geralmente de um dia √∫til.

Para ilustrar o c√°lculo da duration da LFT e demonstrar que ela √© pr√≥xima de zero, podemos seguir os seguintes passos:

I. O pre√ßo da LFT pode ser expresso como:
$$P_0 = VNA \times \frac{COT}{100} = VNA \times \frac{1}{(1 + \frac{r_{aa}}{100})^{\frac{n}{252}}}$$

II.  A Duration de Macaulay (D) √© definida como a sensibilidade do pre√ßo do t√≠tulo a varia√ß√µes na taxa de juros:
$$D = -\frac{1}{P} \frac{dP}{dy}$$
Onde y representa a taxa de juros.

III. Calculamos a derivada do pre√ßo em rela√ß√£o √† taxa de juros ($r_{aa}$):
$$\frac{dP}{dr_{aa}} = VNA \times \frac{d}{dr_{aa}} \left[ (1 + \frac{r_{aa}}{100})^{-\frac{n}{252}} \right] = VNA \times \left( -\frac{n}{252} \right) \times \frac{1}{100} \times (1 + \frac{r_{aa}}{100})^{-\frac{n}{252} - 1}$$

IV. Simplificamos a express√£o para a derivada:
$$\frac{dP}{dr_{aa}} = -\frac{VNA \cdot n}{25200} (1 + \frac{r_{aa}}{100})^{-\frac{n+252}{252}}$$

V. Calculamos a Duration de Macaulay:
$$D = -\frac{1}{P} \frac{dP}{dr_{aa}} = -\frac{1}{VNA \times (1 + \frac{r_{aa}}{100})^{-\frac{n}{252}}} \times \left( -\frac{VNA \cdot n}{25200} (1 + \frac{r_{aa}}{100})^{-\frac{n+252}{252}} \right)$$

VI. Simplificamos a express√£o para a Duration:
$$D = \frac{n}{25200} (1 + \frac{r_{aa}}{100})^{\frac{n}{252}} (1 + \frac{r_{aa}}{100})^{-\frac{n+252}{252}} = \frac{n}{25200} (1 + \frac{r_{aa}}{100})^{-\frac{252}{252}} = \frac{n}{25200} (1 + \frac{r_{aa}}{100})^{-1}$$

VII. Considerando que as LFTs s√£o t√≠tulos de curto prazo e a taxa Selic √© ajustada frequentemente, o prazo *n* √© muito pequeno (pr√≥ximo de 1 dia √∫til).  Portanto:
$$D \approx \frac{1}{25200} (1 + \frac{r_{aa}}{100})^{-1}$$

VIII. Conclus√£o: A Duration da LFT √© muito baixa, pr√≥xima de zero, devido ao seu curto prazo e √† sua indexa√ß√£o √† taxa Selic, que √© continuamente atualizada. ‚ñ†

> üí° **Exemplo Num√©rico:**
>
> Usando os dados do exemplo anterior (VNA = R\$1000, taxa de √°gio = 0.5\% ao ano, prazo = 63 dias √∫teis), e aproximando *n* para 1 dia √∫til para o c√°lculo da Duration, temos:
>
> $D \approx \frac{1}{25200} (1 + \frac{0.5}{100})^{-1}$
>
> $D \approx \frac{1}{25200} (1.005)^{-1}$
>
> $D \approx \frac{1}{25200} \times 0.995 \approx 0.00003948$
>
> A Duration √© aproximadamente 0.00003948. Isso confirma que a duration da LFT √© extremamente baixa, o que significa que pequenas varia√ß√µes na taxa de juros ter√£o um impacto m√≠nimo no pre√ßo do t√≠tulo.
>
> ```python
> import numpy as np
>
> # Par√¢metros
> taxa_agio_anual = 0.005
> dias_uteis = 1 # Aproximando para 1 dia √∫til
>
> # C√°lculo da Duration aproximada
> duration = dias_uteis / 25200 * (1 + (taxa_agio_anual / 100))**(-1)
>
> print(f"A Duration aproximada da LFT √©: {duration:.8f}")
> ```

#### NTN (Notas do Tesouro Nacional)
As **Notas do Tesouro Nacional (NTN)** s√£o t√≠tulos h√≠bridos que pagam cupons semestrais e t√™m o valor de resgate atualizado por indexadores como IPCA (NTN-B), IGP-M (NTN-C) ou varia√ß√£o cambial (NTN-D) [^8].

##### Precifica√ß√£o da NTN-B
O pre√ßo de mercado de uma NTN-B reflete o valor presente de seus fluxos de caixa futuros (cupons e valor de face), descontados a uma taxa de juros apropriada. A f√≥rmula geral para calcular o valor presente de um t√≠tulo com cupons √©:

$$P = \sum_{t=1}^{n} \frac{C}{(1+y)^t} + \frac{FV}{(1+y)^n}$$

Onde:
*   $P$ √© o pre√ßo do t√≠tulo
*   $C$ √© o valor do cupom pago a cada per√≠odo
*   $y$ √© o *yield to maturity* (YTM) do t√≠tulo
*   $FV$ √© o valor de face do t√≠tulo
*   $n$ √© o n√∫mero de per√≠odos at√© o vencimento

Considerando a cota√ß√£o (COT) da NTN-B:

$$COT = \frac{C_1}{(1+r)^{\frac{du_1}{252}}} + \frac{C_2}{(1+r)^{\frac{du_2}{252}}} + \ldots + \frac{C_n + P_n}{(1+r)^{\frac{du_n}{252}}}$$

E o pre√ßo de compra:

$$P_0 = VNA \times \frac{COT}{100}$$

> üí° **Exemplo Num√©rico:**
>
> Considere uma NTN-B com VNA de R\$1000, cupons semestrais de R\$45, 4 per√≠odos (2 anos) at√© o vencimento, e um *yield to maturity* (YTM) de 6\% ao ano (0.06). Vamos calcular o pre√ßo te√≥rico do t√≠tulo.
>
> Os fluxos de caixa s√£o:
>
> *   Cupom 1: R\$45
> *   Cupom 2: R\$45
> *   Cupom 3: R\$45
> *   Cupom 4: R\$45 + R\$1000 (VNA) = R\$1045
>
> Usando a f√≥rmula do valor presente:
>
> $P = \frac{45}{(1+0.06/2)^1} + \frac{45}{(1+0.06/2)^2} + \frac{45}{(1+0.06/2)^3} + \frac{1045}{(1+0.06/2)^4}$
>
> $P = \frac{45}{(1.03)^1} + \frac{45}{(1.03)^2} + \frac{45}{(1.03)^3} + \frac{1045}{(1.03)^4}$
>
> $P \approx 43.69 + 42.42 + 41.18 + 926.46$
>
> $P \approx 1053.75$
>
> Portanto, o pre√ßo te√≥rico da NTN-B seria de aproximadamente R\$1053.75.
>
> ```python
> import numpy as np
>
> # Par√¢metros
> vna = 1000
> cupom = 45
> ytm = 0.06
> periodos = 4
>
> # C√°lculo do pre√ßo te√≥rico
> preco = 0
> for t in range(1, periodos + 1):
>     if t == periodos:
>         fluxo_caixa = cupom + vna
>     else:
>         fluxo_caixa = cupom
>     preco += fluxo_caixa / (1 + ytm/2)**t
>
> print(f"O pre√ßo te√≥rico da NTN-B √©: R\${preco:.2f}")
> ```

##### Duration da NTN-B
Como vimos no Teorema 1.1, a Duration de Macaulay (D) para um t√≠tulo com pagamentos de cupom pode ser calculada como:

$$D = \frac{\sum_{t=1}^{n} t \cdot PV(CF_t)}{\sum_{t=1}^{n} PV(CF_t)} = \frac{\sum_{t=1}^{n} t \cdot \frac{CF_t}{(1+y)^t}}{P}$$

Onde:
* $CF_t$ √© o fluxo de caixa no per√≠odo t (cupom ou valor de face)
* $y$ √© o yield do t√≠tulo
* $n$ √© o n√∫mero total de per√≠odos
* $P$ √© o pre√ßo do t√≠tulo (valor presente de todos os fluxos de caixa)

Para a NTN-B, a dura√ß√£o reflete a sensibilidade do pre√ßo do t√≠tulo √†s mudan√ßas nas taxas de juros reais, ou seja, nas taxas de juros nominais ajustadas pela infla√ß√£o. Uma duration mais alta indica maior sensibilidade.

**Teorema 1.1:** (Duration de Macaulay) A Duration de Macaulay representa a m√©dia ponderada dos tempos para receber os fluxos de caixa de um t√≠tulo, ponderada pelo valor presente de cada fluxo de caixa.

*Proof:*

I.  Considere um t√≠tulo que paga $CF_t$ no tempo $t$, onde $t = 1, 2, \ldots, n$. O pre√ßo do t√≠tulo ($P$) √© o valor presente de todos os seus fluxos de caixa, descontados pela taxa de juros $y$:
$$P = \sum_{t=1}^{n} \frac{CF_t}{(1+y)^t}$$

II.  A Duration de Macaulay (D) mede a sensibilidade do pre√ßo do t√≠tulo a uma mudan√ßa na taxa de juros. Matematicamente, ela √© definida como a varia√ß√£o percentual no pre√ßo do t√≠tulo para uma pequena varia√ß√£o na taxa de juros:
$$D = -\frac{1}{P} \frac{dP}{dy} (1+y)$$

III. Vamos calcular a derivada do pre√ßo ($P$) em rela√ß√£o ao *yield* ($y$):
$$\frac{dP}{dy} = \frac{d}{dy} \sum_{t=1}^{n} \frac{CF_t}{(1+y)^t} = \sum_{t=1}^{n} CF_t \frac{d}{dy} (1+y)^{-t} = \sum_{t=1}^{n} CF_t (-t)(1+y)^{-t-1} = -\sum_{t=1}^{n} t \frac{CF_t}{(1+y)^{t+1}}$$

IV. Agora, substitu√≠mos a derivada $\frac{dP}{dy}$ na f√≥rmula da Duration:
$$D = -\frac{1}{P} \left( -\sum_{t=1}^{n} t \frac{CF_t}{(1+y)^{t+1}} \right) (1+y) = \frac{1}{P} \sum_{t=1}^{n} t \frac{CF_t}{(1+y)^{t+1}} (1+y) = \frac{\sum_{t=1}^{n} t \frac{CF_t}{(1+y)^t}}{P}$$

V.  A express√£o $\frac{CF_t}{(1+y)^t}$ representa o valor presente do fluxo de caixa no tempo $t$, que denotamos por $PV(CF_t)$. Portanto, podemos reescrever a Duration como:
$$D = \frac{\sum_{t=1}^{n} t \cdot PV(CF_t)}{P} = \frac{\sum_{t=1}^{n} t \cdot PV(CF_t)}{\sum_{t=1}^{n} PV(CF_t)}$$

VI. A f√≥rmula acima mostra que a Duration de Macaulay √© a m√©dia ponderada dos tempos at√© o recebimento dos fluxos de caixa, ponderada pelo valor presente de cada fluxo de caixa. ‚ñ†

> üí° **Exemplo Num√©rico:**
>
> Usando os dados do exemplo anterior (NTN-B com cupons de R\$45, 4 per√≠odos, YTM de 6\% ao ano, pre√ßo de R\$1053.75), calculamos a Duration de Macaulay:
>
> $D = \frac{1 \times 43.69 + 2 \times 42.42 + 3 \times 41.18 + 4 \times 926.46}{1053.75}$
>
> $D = \frac{43.69 + 84.84 + 123.54 + 3705.84}{1053.75}$
>
> $D = \frac{3957.91}{1053.75} \approx 3.756$
>
> A Duration de Macaulay √© aproximadamente 3.756 per√≠odos (semestres). Para converter para anos, dividimos por 2: 3.756 / 2 = 1.878 anos. Isso significa que, aproximadamente, para cada varia√ß√£o de 1\% na taxa de juros, o pre√ßo da NTN-B variar√° em 1.878\%.
>
> ```python
> import numpy as np
>
> # Par√¢metros
> vna = 1000
> cupom = 45
> ytm = 0.06
> periodos = 4
> preco = 1053.75  # Pre√ßo calculado no exemplo anterior
>
> # C√°lculo da Duration de Macaulay
> duration_numerador = 0
> for t in range(1, periodos + 1):
>     if t == periodos:
>         fluxo_caixa = cupom + vna
>     else:
>         fluxo_caixa = cupom
>     valor_presente = fluxo_caixa / (1 + ytm/2)**t
>     duration_numerador += t * valor_presente
>
> duration = duration_numerador / preco
> duration_anos = duration / 2
>
> print(f"A Duration de Macaulay da NTN-B √©: {duration:.3f} semestres")
> print(f"A Duration de Macaulay da NTN-B √©: {duration_anos:.3f} anos")
> ```

##### Convexidade da NTN-B
A NTN-B, sendo um t√≠tulo com pagamentos de cupons, geralmente possui uma convexidade positiva. Isso significa que a rela√ß√£o entre o pre√ßo e o *yield* n√£o √© linear, e a duration √© apenas uma aproxima√ß√£o da mudan√ßa no pre√ßo. A convexidade positiva indica que, para grandes varia√ß√µes nas taxas de juros, o ganho no pre√ßo do t√≠tulo ser√° maior do que a perda se as taxas de juros aumentarem na mesma magnitude.

**Observa√ß√£o:** O c√°lculo exato da convexidade da NTN-B envolve a segunda derivada do pre√ßo em rela√ß√£o ao *yield*, o que pode ser computacionalmente intensivo. Em muitos casos, uma aproxima√ß√£o num√©rica √© utilizada.

Para demonstrar que a NTN-B possui convexidade positiva, considere os seguintes passos:

I. Definimos o pre√ßo de um t√≠tulo com cupons como a soma do valor presente de seus fluxos de caixa:

$$P(y) = \sum_{t=1}^{n} \frac{CF_t}{(1+y)^t}$$

Onde:
*   $P(y)$ √© o pre√ßo do t√≠tulo como fun√ß√£o do *yield* $y$
*   $CF_t$ √© o fluxo de caixa no per√≠odo $t$
*   $y$ √© o *yield* do t√≠tulo
*   $n$ √© o n√∫mero de per√≠odos at√© o vencimento

II. Calculamos a primeira derivada do pre√ßo em rela√ß√£o ao *yield*:

$$\frac{dP}{dy} = \sum_{t=1}^{n} \frac{-t \cdot CF_t}{(1+y)^{t+1}}$$

III. Calculamos a segunda derivada do pre√ßo em rela√ß√£o ao *yield*:

$$\frac{d^2P}{dy^2} = \sum_{t=1}^{n} \frac{t(t+1) \cdot CF_t}{(1+y)^{t+2}}$$

IV. A convexidade ($C$) √© dada por:

$$C = \frac{1}{P} \frac{d^2P}{dy^2} = \frac{1}{P} \sum_{t=1}^{n} \frac{t(t+1) \cdot CF_t}{(1+y)^{t+2}}$$

V. Analisamos o sinal da express√£o da convexidade:

*   $t$ e $(t+1)$ s√£o sempre positivos, pois representam per√≠odos de tempo.
*   $CF_t$ √© positivo, pois representa os fluxos de caixa do t√≠tulo (cupons e valor de face).
*   $(1+y)^{t+2}$ √© positivo, pois √© uma taxa de desconto elevada a uma pot√™ncia.
*   $P$ √© positivo, pois representa o pre√ßo do t√≠tulo.

Portanto, cada termo na soma √© positivo, e a soma total √© positiva.

VI. Conclus√£o: A convexidade da NTN-B √© positiva, o que indica que a rela√ß√£o entre o pre√ßo e o *yield* n√£o √© linear, e a duration √© apenas uma aproxima√ß√£o da mudan√ßa no pre√ßo. A convexidade positiva implica que o ganho no pre√ßo do t√≠tulo ser√° maior do que a perda se as taxas de juros aumentarem na mesma magnitude. ‚ñ†

> üí° **Exemplo Num√©rico:**
>
> Para a NTN-B do exemplo anterior (cupons de R\$45, 4 per√≠odos, YTM de 6\% ao ano, pre√ßo de R\$1053.75), o c√°lculo da convexidade requer a segunda derivada, que pode ser aproximada numericamente. No entanto, a t√≠tulo de ilustra√ß√£o, podemos dizer que a convexidade ser√° positiva, indicando que a rela√ß√£o entre o pre√ßo e o *yield* n√£o √© linear.
>
> Uma aproxima√ß√£o num√©rica da convexidade poderia ser feita simulando pequenas varia√ß√µes no *yield* e observando a mudan√ßa no pre√ßo do t√≠tulo.
>
> Por exemplo, se aumentarmos o *yield* em 0.1\% (de 6\% para 6.1\%) e calcularmos o novo pre√ßo, e diminuirmos o *yield* em 0.1\% (de 6\% para 5.9\%) e calcularmos o novo pre√ßo, podemos usar essas informa√ß√µes para aproximar a convexidade.
>
> ```python
> import numpy as np
>
> # Par√¢metros
> vna = 1000
> cupom = 45
> ytm = 0.06
> periodos = 4
> preco = 1053.75  # Pre√ßo calculado anteriormente
> delta_ytm = 0.001  # Varia√ß√£o no YTM (0.1%)
>
> # Fun√ß√£o para calcular o pre√ßo do t√≠tulo
> def calcular_preco(ytm):
>     preco = 0
>     for t in range(1, periodos + 1):
>         if t == periodos:
>             fluxo_caixa = cupom + vna
>         else:
>             fluxo_caixa = cupom
>         preco += fluxo_caixa / (1 + ytm/2)**t
>     return preco
>
> # Calcular pre√ßos com YTM aumentado e diminu√≠do
> preco_aumento = calcular_preco(ytm + delta_ytm)
> preco_diminuicao = calcular_preco(ytm - delta_ytm)
>
> # Aproximar a convexidade
> convexidade_aproximada = (preco_aumento + preco_diminuicao - 2 * preco) / (delta_ytm**2 * preco * 10000)
>
> print(f"Pre√ßo com YTM aumentado: R\${preco_aumento:.2f}")
> print(f"Pre√ßo com YTM diminu√≠do: R\${preco_diminuicao:.2f}")
> print(f"Convexidade aproximada: {convexidade_aproximada:.4f}")
> ```
>
> Este c√≥digo calcula uma aproxima√ß√£o da convexidade usando uma varia√ß√£o pequena no YTM, mostrando como o pre√ßo se comporta de forma n√£o linear.

### Estrat√©gias de Negocia√ß√£o e Gest√£o de Risco
A correta precifica√ß√£o dos t√≠tulos p√∫blicos, juntamente com a an√°lise da Duration e Convexidade, permite a implementa√ß√£o de diversas estrat√©gias de negocia√ß√£o e gest√£o de risco. Algumas das estrat√©gias mais comuns incluem:

*   **Immunization:** Utiliza√ß√£o da Duration para proteger o valor de uma carteira de t√≠tulos contra varia√ß√µes nas taxas de juros. A carteira √© imunizada igualando a duration da carteira ao horizonte de investimento.
*   **Barbell Strategy:** Constru√ß√£o de uma carteira com t√≠tulos de curto e longo prazo, buscando um equil√≠brio entre liquidez e rendimento.
*   **Bullet Strategy:** Concentra√ß√£o dos investimentos em t√≠tulos com vencimento pr√≥ximo a um determinado horizonte de investimento, ideal para o cumprimento de obriga√ß√µes futuras.

> üí° **Exemplo Num√©rico:**
>
> Suponha que um investidor tenha uma obriga√ß√£o de R\$1.000.000 em 5 anos. Para implementar a estrat√©gia de Immunization, o investidor deve construir uma carteira de t√≠tulos p√∫blicos com uma Duration igual a 5 anos. Se a taxa de juros de mercado aumentar, o valor dos t√≠tulos na carteira diminuir√°, mas o reinvestimento dos cupons recebidos a taxas mais altas compensar√° essa perda, garantindo que o investidor ter√° R\$1.000.000 em 5 anos.
>
> Para simplificar, vamos supor que o investidor escolha dois t√≠tulos:
>
> *   T√≠tulo A: NTN-B com Duration de 2 anos
> *   T√≠tulo B: NTN-B com Duration de 8 anos
>
> Para imunizar a carteira, o investidor precisa encontrar a propor√ß√£o de investimento em cada t√≠tulo que resulte em uma Duration da carteira igual a 5 anos.
>
> Seja $w_A$ a propor√ß√£o investida no T√≠tulo A e $w_B$ a propor√ß√£o investida no T√≠tulo B. Ent√£o:
>
> $w_A \times 2 + w_B \times 8 = 5$
>
> Como $w_A + w_B = 1$:
>
> $w_A \times 2 + (1 - w_A) \times 8 = 5$
>
> $2w_A + 8 - 8w_A = 5$
>
> $-6w_A = -3$
>
> $w_A = 0.5$
>
> Portanto, $w_B = 1 - 0.5 = 0.5$.
>
> Para imunizar a carteira, voc√™ deve investir 50% em cada t√≠tulo.

### Convexidade

A convexidade √© uma medida de como a duration de um t√≠tulo muda √† medida que as taxas de juros mudam. T√≠tulos com alta convexidade s√£o mais sens√≠veis √†s mudan√ßas nas taxas de juros. A convexidade pode ser usada para melhorar a imuniza√ß√£o da carteira, pois pode ajudar a compensar os erros que podem surgir ao usar apenas a duration.

A f√≥rmula da convexidade √©:

$Convexidade = \frac{1}{P} \frac{d^2P}{dr^2}$

Onde:
- $P$ √© o pre√ßo do t√≠tulo
- $r$ √© a taxa de juros

Em termos pr√°ticos, a convexidade mede a curvatura da rela√ß√£o entre o pre√ßo do t√≠tulo e a taxa de juros.

#### Exemplo de Convexidade

Considere um t√≠tulo com as seguintes caracter√≠sticas:

- Pre√ßo atual: $1000
- Taxa de juros atual: 5%
- Convexidade: 2

Se a taxa de juros aumentar em 1%, o pre√ßo do t√≠tulo diminuir√° aproximadamente em:

$\Delta P \approx -Duration \times \Delta r + \frac{1}{2} \times Convexidade \times (\Delta r)^2$

Suponha que a Duration seja 7.

$\Delta P \approx -7 \times 0.01 + \frac{1}{2} \times 2 \times (0.01)^2$
$\Delta P \approx -0.07 + 0.0001 = -0.0699$

O pre√ßo diminuir√° aproximadamente $69.9.

### Estrat√©gias de Gest√£o de Carteiras de Renda Fixa

1.  **Buy and Hold:** Comprar t√≠tulos e mant√™-los at√© o vencimento.
2.  **Laddered Portfolio:** Construir uma carteira com t√≠tulos que vencem em diferentes datas.
3.  **Bullet Portfolio:** Construir uma carteira com t√≠tulos que vencem em uma data espec√≠fica.
4.  **Barbell Portfolio:** Construir uma carteira com t√≠tulos de curto e longo prazo, evitando t√≠tulos de m√©dio prazo.
5.  **Estrat√©gias de Imuniza√ß√£o:** Ajustar a carteira para que ela seja imune √†s mudan√ßas nas taxas de juros.

### Riscos em Carteiras de Renda Fixa

1.  **Risco de Taxa de Juros:** Risco de que as taxas de juros aumentem, o que pode diminuir o valor dos t√≠tulos.
2.  **Risco de Cr√©dito:** Risco de que o emissor do t√≠tulo n√£o consiga pagar os juros ou o principal.
3.  **Risco de Infla√ß√£o:** Risco de que a infla√ß√£o corroa o valor dos retornos dos t√≠tulos.
4.  **Risco de Liquidez:** Risco de que n√£o seja poss√≠vel vender os t√≠tulos rapidamente sem incorrer em perdas significativas.
5.  **Risco de Reinvestimento:** Risco de que os juros dos t√≠tulos n√£o possam ser reinvestidos √† mesma taxa de juros.

### Conclus√£o

A gest√£o de carteiras de renda fixa √© um processo complexo que requer uma compreens√£o profunda dos diferentes tipos de t√≠tulos, estrat√©gias e riscos. Ao entender esses conceitos, os investidores podem construir carteiras de renda fixa que atendam √†s suas necessidades e objetivos.

<!-- END -->