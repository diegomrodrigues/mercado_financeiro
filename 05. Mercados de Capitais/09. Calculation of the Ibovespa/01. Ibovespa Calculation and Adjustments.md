C√°lculo do Ibovespa: Metodologia e Ajustes

### Introdu√ß√£o
Este cap√≠tulo dedica-se √† explora√ß√£o detalhada do funcionamento do mercado de capitais brasileiro, com foco espec√≠fico no c√°lculo do Ibovespa, o √≠ndice de refer√™ncia da Bolsa de Valores de S√£o Paulo. A an√°lise aprofundada das metodologias de c√°lculo e dos ajustes necess√°rios para manter a representatividade do √≠ndice √© crucial para a compreens√£o da din√¢mica do mercado e para a tomada de decis√µes de investimento informadas [^56]. Em continuidade com os t√≥picos anteriores que abordaram a abertura de capital, governan√ßa corporativa, e o Banco de T√≠tulos (BTC) [^1, ^7, ^15], este cap√≠tulo visa fornecer uma vis√£o abrangente dos √≠ndices de a√ß√µes, com √™nfase no Ibovespa.

### Conceitos Fundamentais

O Ibovespa √© calculado atrav√©s do somat√≥rio do produto entre os pesos (quantidade te√≥rica da a√ß√£o) e o √∫ltimo pre√ßo observado das a√ß√µes que comp√µem sua carteira te√≥rica [^33]. Matematicamente, isso pode ser expresso como:

$$
Ibovespa_t = \sum_{i=1}^{n} P_{i,t} \times Q_{i,t}
$$

Onde:
*   $Ibovespa_t$ = √çndice Bovespa no instante *t*
*   *n* = n√∫mero total de a√ß√µes componentes da carteira te√≥rica
*   $P_{i,t}$ = √∫ltimo pre√ßo da a√ß√£o *i* no instante *t*
*   $Q_{i,t}$ = quantidade te√≥rica da a√ß√£o *i* na carteira no instante *t*

> üí° **Exemplo Num√©rico:**
>
> Imagine que o Ibovespa √© composto por apenas tr√™s a√ß√µes: A, B e C. No instante *t*, seus pre√ßos e quantidades te√≥ricas s√£o:
>
> *   A√ß√£o A: $P_{A,t} = R\$ 20$, $Q_{A,t} = 500$
> *   A√ß√£o B: $P_{B,t} = R\$ 30$, $Q_{B,t} = 300$
> *   A√ß√£o C: $P_{C,t} = R\$ 10$, $Q_{C,t} = 1000$
>
> O valor do Ibovespa no instante *t* seria:
>
> $Ibovespa_t = (20 \times 500) + (30 \times 300) + (10 \times 1000) = 10000 + 9000 + 10000 = 29000$
>
> Portanto, neste exemplo simplificado, o Ibovespa no instante *t* seria igual a 29.000 pontos.

A *quantidade te√≥rica* ($Q_{i,t}$) representa o peso da a√ß√£o *i* no √≠ndice. A BM&FBOVESPA realiza ajustes nesta quantidade para evitar distor√ß√µes sempre que uma empresa distribui algum tipo de provento [^33].

**Proposi√ß√£o 1**
A f√≥rmula para o c√°lculo do Ibovespa pode ser expressa em nota√ß√£o matricial. Seja $\mathbf{P}_t$ um vetor linha contendo os pre√ßos das a√ß√µes no instante $t$, tal que $\mathbf{P}_t = [P_{1,t}, P_{2,t}, \ldots, P_{n,t}]$, e $\mathbf{Q}_t$ um vetor coluna contendo as quantidades te√≥ricas das a√ß√µes no instante $t$, tal que $\mathbf{Q}_t = [Q_{1,t}, Q_{2,t}, \ldots, Q_{n,t}]^T$. Ent√£o, o Ibovespa no instante $t$ pode ser expresso como o produto interno (produto escalar) desses dois vetores:

$$
Ibovespa_t = \mathbf{P}_t \mathbf{Q}_t
$$

*Coment√°rio:* Essa representa√ß√£o matricial facilita a manipula√ß√£o e an√°lise do √≠ndice, especialmente em contextos computacionais e estat√≠sticos.

> üí° **Exemplo Num√©rico:**
>
> Usando o exemplo anterior, podemos representar os pre√ßos e quantidades te√≥ricas em vetores:
>
> $\mathbf{P}_t = [20, 30, 10]$
> $\mathbf{Q}_t = \begin{bmatrix} 500 \\ 300 \\ 1000 \end{bmatrix}$
>
> O Ibovespa no instante *t* seria:
>
> $Ibovespa_t = \mathbf{P}_t \mathbf{Q}_t = [20, 30, 10] \begin{bmatrix} 500 \\ 300 \\ 1000 \end{bmatrix} = (20 \times 500) + (30 \times 300) + (10 \times 1000) = 29000$
>
> Confirmando o resultado anterior, mas agora em nota√ß√£o matricial.
>
> ```python
> import numpy as np
>
> # Pre√ßos das a√ß√µes
> P = np.array([20, 30, 10])
>
> # Quantidades te√≥ricas das a√ß√µes
> Q = np.array([500, 300, 1000])
>
> # C√°lculo do Ibovespa usando produto escalar
> ibovespa = np.dot(P, Q)
>
> print(f"O valor do Ibovespa √©: {ibovespa}")
> ```

**Proposi√ß√£o 1.1**
A varia√ß√£o do Ibovespa entre dois instantes de tempo $t_1$ e $t_2$ pode ser expressa como:

$$
\Delta Ibovespa = Ibovespa_{t_2} - Ibovespa_{t_1} = \mathbf{P}_{t_2} \mathbf{Q}_{t_2} - \mathbf{P}_{t_1} \mathbf{Q}_{t_1}
$$

*Coment√°rio:* Esta formula√ß√£o permite analisar as contribui√ß√µes das varia√ß√µes dos pre√ßos e das quantidades te√≥ricas para a varia√ß√£o total do √≠ndice.

> üí° **Exemplo Num√©rico:**
>
> Considere os seguintes dados:
>
> *   Instante $t_1$: $\mathbf{P}_{t_1} = [20, 30, 10]$, $\mathbf{Q}_{t_1} = \begin{bmatrix} 500 \\ 300 \\ 1000 \end{bmatrix}$, $Ibovespa_{t_1} = 29000$
> *   Instante $t_2$: $\mathbf{P}_{t_2} = [22, 31, 11]$, $\mathbf{Q}_{t_2} = \begin{bmatrix} 500 \\ 300 \\ 1000 \end{bmatrix}$
>
> Primeiro, calcule $Ibovespa_{t_2}$:
>
> $Ibovespa_{t_2} = (22 \times 500) + (31 \times 300) + (11 \times 1000) = 11000 + 9300 + 11000 = 31300$
>
> Agora, calcule a varia√ß√£o do Ibovespa:
>
> $\Delta Ibovespa = Ibovespa_{t_2} - Ibovespa_{t_1} = 31300 - 29000 = 2300$
>
> A varia√ß√£o do Ibovespa entre os instantes $t_1$ e $t_2$ √© de 2300 pontos.
>
> ```python
> import numpy as np
>
> # Dados no instante t1
> P_t1 = np.array([20, 30, 10])
> Q_t1 = np.array([500, 300, 1000])
> Ibovespa_t1 = np.dot(P_t1, Q_t1)
>
> # Dados no instante t2
> P_t2 = np.array([22, 31, 11])
> Q_t2 = np.array([500, 300, 1000])
> Ibovespa_t2 = np.dot(P_t2, Q_t2)
>
> # Varia√ß√£o do Ibovespa
> delta_Ibovespa = Ibovespa_t2 - Ibovespa_t1
>
> print(f"Ibovespa no instante t1: {Ibovespa_t1}")
> print(f"Ibovespa no instante t2: {Ibovespa_t2}")
> print(f"Varia√ß√£o do Ibovespa: {delta_Ibovespa}")
> ```

**Prova da Proposi√ß√£o 1.1:**
Queremos provar que $\Delta Ibovespa = Ibovespa_{t_2} - Ibovespa_{t_1} = \mathbf{P}_{t_2} \mathbf{Q}_{t_2} - \mathbf{P}_{t_1} \mathbf{Q}_{t_1}$.
I.  Por defini√ß√£o, $\Delta Ibovespa = Ibovespa_{t_2} - Ibovespa_{t_1}$.
II. Da Proposi√ß√£o 1, sabemos que $Ibovespa_t = \mathbf{P}_t \mathbf{Q}_t$.
III. Portanto, $Ibovespa_{t_2} = \mathbf{P}_{t_2} \mathbf{Q}_{t_2}$ e $Ibovespa_{t_1} = \mathbf{P}_{t_1} \mathbf{Q}_{t_1}$.
IV. Substituindo (III) em (I), obtemos $\Delta Ibovespa = \mathbf{P}_{t_2} \mathbf{Q}_{t_2} - \mathbf{P}_{t_1} \mathbf{Q}_{t_1}$.
Assim, provamos que $\Delta Ibovespa = Ibovespa_{t_2} - Ibovespa_{t_1} = \mathbf{P}_{t_2} \mathbf{Q}_{t_2} - \mathbf{P}_{t_1} \mathbf{Q}_{t_1}$. ‚ñ†

**Ajustes por Proventos**

Quando uma empresa que integra o Ibovespa distribui proventos (dividendos, juros sobre capital pr√≥prio, bonifica√ß√µes, etc.), a BM&FBOVESPA realiza ajustes na quantidade te√≥rica da carteira para evitar distor√ß√µes no √≠ndice [^33]. O mecanismo de altera√ß√£o para uma a√ß√£o √© semelhante ao utilizado para o ajuste da carteira como um todo. Considera-se que o investidor *realizou* (vendeu) as a√ß√µes ao √∫ltimo pre√ßo de fechamento anterior ao in√≠cio da distribui√ß√£o do provento e utilizou os recursos na compra das mesmas a√ß√µes *sem* o provento distribu√≠do (ex-provento).

Al√©m da mudan√ßa na quantidade te√≥rica das a√ß√µes, muda-se o pre√ßo, denominado "pre√ßo ex-te√≥rico" ($P_{ex}$) [^33].

**F√≥rmula de Altera√ß√£o na Quantidade Te√≥rica (Por Ocasi√£o da Distribui√ß√£o de Proventos)**

$$
Q_{nova} = \frac{Q_{antiga} \times P_{o}}{P_{ex}}
$$

Onde:

*   $Q_{nova}$ = quantidade nova
*   $Q_{antiga}$ = quantidade antiga
*   $P_{o}$ = √∫ltimo pre√ßo de fechamento anterior ao in√≠cio da distribui√ß√£o do provento
*   $P_{ex}$ = pre√ßo ex-te√≥rico, calculado com base em $P_{o}$

O *pre√ßo ex-te√≥rico* √© calculado pela seguinte f√≥rmula [^33]:

$$
P_{ex} = \frac{P_{c}+(\%S \times Z) - Div}{1 + \%B + \%S}
$$

Onde:

*   $P_{ex}$ = pre√ßo ex-te√≥rico
*   $P_{c}$ = √∫ltimo pre√ßo de fechamento anterior ao in√≠cio da distribui√ß√£o do provento
*   *\%S* = percentual de subscri√ß√£o
*   *Z* = valor em moeda corrente de emiss√£o de cada a√ß√£o a ser subscrita
*   *Div* = valor em moeda corrente recebido por a√ß√£o a t√≠tulo de dividendo
*   *\%B* = percentual de bonifica√ß√£o

**Observa√ß√£o:** A f√≥rmula do pre√ßo ex-te√≥rico representa o pre√ßo da a√ß√£o ajustado pelos efeitos dos proventos, subscri√ß√µes e bonifica√ß√µes. Ela visa garantir que o √≠ndice reflita o valor justo da a√ß√£o ap√≥s a distribui√ß√£o desses eventos.

**Lema 1**
Se n√£o houver subscri√ß√£o (%S = 0) nem bonifica√ß√£o (%B = 0), a f√≥rmula do pre√ßo ex-te√≥rico se simplifica para:

$$
P_{ex} = P_c - Div
$$

*Prova:*
Se %S = 0 e %B = 0, ent√£o a f√≥rmula original se torna:
$$
P_{ex} = \frac{P_{c}+(0 \times Z) - Div}{1 + 0 + 0} = \frac{P_{c} - Div}{1} = P_c - Div
$$
Portanto, o pre√ßo ex-te√≥rico √© simplesmente o pre√ßo de fechamento anterior menos o valor do dividendo por a√ß√£o. ‚ñ†

**Lema 1.1**
Se apenas a bonifica√ß√£o for zero (%B = 0), a f√≥rmula do pre√ßo ex-te√≥rico se simplifica para:

$$
P_{ex} = \frac{P_c + (\%S \times Z) - Div}{1 + \%S}
$$

*Prova:*
Se %B = 0, ent√£o a f√≥rmula original se torna:
$$
P_{ex} = \frac{P_{c}+(\%S \times Z) - Div}{1 + \%S + 0} = \frac{P_{c} + (\%S \times Z) - Div}{1 + \%S}
$$ ‚ñ†

**Exemplo:**

Suponha que uma a√ß√£o *XYZ*, componente do Ibovespa, anuncie um dividendo de R\$ 0,50 por a√ß√£o. O √∫ltimo pre√ßo de fechamento antes do pagamento do dividendo ($P_o$) foi de R\$ 10,00. N√£o h√° subscri√ß√£o ou bonifica√ß√£o. Portanto, %S = 0 e %B = 0.

O pre√ßo ex-te√≥rico seria:
$$P_{ex} = \frac{10 + (0 \times 0) - 0.5}{1 + 0 + 0} = \frac{9.5}{1} = 9.5$$

Se a quantidade antiga de a√ß√µes *XYZ* na carteira te√≥rica do Ibovespa fosse 10.000, a nova quantidade te√≥rica seria:
$$Q_{nova} = \frac{10000 \times 10}{9.5} = 10526.32$$

Assim, ap√≥s o pagamento do dividendo, a quantidade te√≥rica da a√ß√£o *XYZ* no Ibovespa seria ajustada para 10.526,32, e o pre√ßo da a√ß√£o ajustado para R\$ 9,50 [^33]. Esse ajuste garante que o √≠ndice continue refletindo o valor de mercado total das empresas, independentemente da distribui√ß√£o de proventos [^33].

> üí° **Exemplo Num√©rico:**
>
> Vamos considerar um cen√°rio onde uma empresa oferece uma subscri√ß√£o. Uma a√ß√£o *ABC* tem um pre√ßo de fechamento anterior ($P_c$) de R\$ 25,00. A empresa anuncia um dividendo (Div) de R\$ 1,00 por a√ß√£o, um percentual de subscri√ß√£o (%S) de 10% (0,10), e o valor de emiss√£o de cada nova a√ß√£o a ser subscrita (Z) √© R\$ 20,00. N√£o h√° bonifica√ß√£o (%B = 0).
>
> Primeiro, calcule o pre√ßo ex-te√≥rico ($P_{ex}$):
>
> $$P_{ex} = \frac{25 + (0.10 \times 20) - 1}{1 + 0.10} = \frac{25 + 2 - 1}{1.10} = \frac{26}{1.10} = 23.64$$
>
> Agora, suponha que a quantidade antiga ($Q_{antiga}$) de a√ß√µes *ABC* na carteira te√≥rica do Ibovespa seja 5.000. Calcule a nova quantidade te√≥rica ($Q_{nova}$):
>
> $$Q_{nova} = \frac{5000 \times 25}{23.64} = \frac{125000}{23.64} = 5287.06$$
>
> Portanto, a nova quantidade te√≥rica da a√ß√£o *ABC* seria ajustada para aproximadamente 5287.06.
>
> ```python
> # Dados
> P_c = 25.00
> Div = 1.00
> S = 0.10
> Z = 20.00
> B = 0
> Q_antiga = 5000
>
> # C√°lculo do pre√ßo ex-te√≥rico
> P_ex = (P_c + (S * Z) - Div) / (1 + B + S)
>
> # C√°lculo da nova quantidade te√≥rica
> Q_nova = (Q_antiga * P_c) / P_ex
>
> print(f"Pre√ßo ex-te√≥rico: {P_ex:.2f}")
> print(f"Nova quantidade te√≥rica: {Q_nova:.2f}")
> ```

**Teorema 1**
O ajuste na quantidade te√≥rica de a√ß√µes devido √† distribui√ß√£o de proventos preserva o valor total da pondera√ß√£o da a√ß√£o no √≠ndice imediatamente antes e depois do ajuste.

*Prova:*
Seja $V_{antiga}$ o valor total da pondera√ß√£o da a√ß√£o antes do ajuste, e $V_{nova}$ o valor total da pondera√ß√£o da a√ß√£o ap√≥s o ajuste. Temos:
$V_{antiga} = Q_{antiga} \times P_{o}$
$V_{nova} = Q_{nova} \times P_{ex}$

Substituindo a f√≥rmula de $Q_{nova}$:
$V_{nova} = \frac{Q_{antiga} \times P_{o}}{P_{ex}} \times P_{ex} = Q_{antiga} \times P_{o} = V_{antiga}$

Portanto, o valor total da pondera√ß√£o da a√ß√£o no √≠ndice √© preservado ap√≥s o ajuste. Isso garante que a distribui√ß√£o de proventos n√£o cause uma mudan√ßa artificial no valor do √≠ndice. ‚ñ†

> üí° **Exemplo Num√©rico:**
>
> Usando o exemplo anterior da a√ß√£o *XYZ* com dividendo de R\$ 0,50, $P_o = R\$ 10,00$, $P_{ex} = R\$ 9,50$, $Q_{antiga} = 10000$ e $Q_{nova} = 10526.32$:
>
> $V_{antiga} = 10000 \times 10 = 100000$
> $V_{nova} = 10526.32 \times 9.5 \approx 100000$
>
> O valor total da pondera√ß√£o da a√ß√£o no √≠ndice √© aproximadamente preservado, confirmando o Teorema 1.

**Teorema 1.1**
O ajuste na quantidade te√≥rica de a√ß√µes devido √† distribui√ß√£o de proventos tamb√©m preserva a participa√ß√£o relativa da a√ß√£o no Ibovespa, considerando apenas o efeito direto do provento.

*Prova:*
Seja $I_{antigo}$ o valor do Ibovespa antes do ajuste, e $I_{novo}$ o valor do Ibovespa ap√≥s o ajuste, considerando apenas o efeito do provento na a√ß√£o $i$. A participa√ß√£o da a√ß√£o $i$ no Ibovespa antes do ajuste √© $\frac{Q_{antiga} \times P_o}{I_{antigo}}$. Ap√≥s o ajuste, a participa√ß√£o √© $\frac{Q_{nova} \times P_{ex}}{I_{novo}}$.

Sabemos que $Q_{nova} \times P_{ex} = Q_{antiga} \times P_o$.  Al√©m disso, a varia√ß√£o no Ibovespa causada *apenas* pelo ajuste da a√ß√£o $i$ √© compensada pelo ajuste na quantidade te√≥rica, de modo que a participa√ß√£o relativa se mant√©m. Formalmente, se o √∫nico ajuste fosse na a√ß√£o $i$, ent√£o $I_{novo} = I_{antigo}$. Portanto, as participa√ß√µes relativas s√£o iguais. ‚ñ†

### Conclus√£o

O c√°lculo do Ibovespa √© um processo din√¢mico que envolve a pondera√ß√£o das a√ß√µes que o comp√µem e ajustes cont√≠nuos para refletir a realidade do mercado. A metodologia, que considera tanto o pre√ßo das a√ß√µes quanto a sua quantidade te√≥rica, √© complementada pelos ajustes em decorr√™ncia da distribui√ß√£o de proventos [^33]. A BM&FBOVESPA acompanha o √≠ndice em tempo real, divulgando-o em seu site e transmitindo-o para vendors, facilitando o acompanhamento por investidores [^34]. Este conhecimento √© fundamental para a interpreta√ß√£o correta do √≠ndice e sua utiliza√ß√£o como ferramenta de an√°lise e tomada de decis√£o no mercado de capitais.

### Refer√™ncias
[^33]: BM&FBOVESPA. "√çndice de a√ß√µes".
[^1]: BM&FBOVESPA. "Cap√≠tulo 5 ‚Äì Mercado de Capitais".
[^7]: BM&FBOVESPA. "A COMPANHIA DE CAPITAL ABERTO".
[^15]: BM&FBOVESPA. "5.3 Banco de T√≠tulos (BTC)".
[^34]: BM&FBOVESPA. "V) Divulga√ß√£o e acompanhamento".
[^56]: BM&FBOVESPA. "5.5. √çndice de a√ß√µes".
<!-- END -->